# docker-compose.yml - プロジェクト全体マウント版（最もシンプル）
version: '3.8'

services:
  graphai-demo:
    build: .
    container_name: graphai-parallel-demo
    ports:
      - "3000:3000"
    volumes:
      # 🚀 プロジェクト全体をマウント（開発モード）
      - .:/app
      # node_modulesは除外（コンテナ内のものを使用）
      - /app/node_modules
    environment:
      - NODE_ENV=development  # 開発モードに変更
      - TZ=Asia/Tokyo
    command: node run-demo-showcase.js
    
  # Webサーバー用（オプション）
  web-server:
    build: .
    container_name: graphai-web
    ports:
      - "3001:3000"
    volumes:
      - .:/app
      - /app/node_modules
    environment:
      - TZ=Asia/Tokyo
    command: node start-web-server.js
    depends_on:
      - graphai-demo